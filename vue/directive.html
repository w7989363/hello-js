<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Directive</title>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>

<body>
  <script>
    Vue.config.devtools = true;
    // 注册全局指令
    Vue.directive('focus', {
      bind: function(el) {
        // 只调用一次，指令第一次绑定到元素时调用。进行一次性的初始化设置
      },
      inserted: function(el) {
        // 当被绑定的元素插入到父节点时调用
        el.focus();
      },
      update: function(el, binding, vnode, oldVnode) {
        // 所在组件的VNode更新时调用

        // 参数说明：除了el之外，其他都是只读的，如果需要共享数据，建议通过dataset
        // el: 指令绑定的元素，可直接操作DOM
        // binding: 一个对象，包含以下属性
        // {
        //   name: 指令名
        //   value: 指令的绑定。例如 v-my-directive="1+1" 中为 2
        //   oldValue: 指令绑定的前一个值，仅update/componentUpdated可用
        //   expression: 字符串形式的指令表达式。例如 v-my-directive="1+1" 中 "1 + 1"
        //   arg: 传给指令的参数，可选。例如 v-my-directive:foo 中的 foo
        //   modifiers: 一个包含修饰符的对象。 例如 v-my-directive.foo.bar 中 {foo:true, bar:true}
        // }
        // vnode: Vue 编译生成的虚拟节点
        // oldVnode: 上一个虚拟节点。 update/componentUpdated 中可用
      },
      componentUpdated: function(el) {
        // 指令所在组件的 VNode 及其子 VNode 全部更新后调用
      },
      unbind: function(el) {
        // 指令与元素解绑时调用
      }
    })

    // 组件中 directives 选项注册局部指令
    // directives: {
    // 	focus: {
    // 		inserted: function(el) {
    // 			el.focus();
    // 		}
    // 	}
    // }

    // 然后就可以在模板中任何元素上使用 v-focus 属性 <input v-focus>
  </script>

</body>

</html>
